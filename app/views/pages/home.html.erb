<div class="container p-0">
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block" src="https://i.imgur.com/4Fm4CtJ.jpg" alt="First slide">
        <div class="carousel-caption d-none d-block">
          <h3 class="" style="text-shadow: 2px 2px 4px #000000;">RAMADAN OFFER</h3>
          <p style="text-shadow: 2px 2px 4px #000000;">50% Off dates</p>
        </div>
      </div>
      <div class="carousel-item">
        <img class="d-block" src="https://i.imgur.com/KAhNdyf.jpg" alt="Second slide">
        <div class="carousel-caption d-none d-block">
          <h5 style="text-shadow: 2px 2px 4px #000000;">...</h5>
          <p style="text-shadow: 2px 2px 4px #000000;">...</p>
        </div>
      </div>
      <div class="carousel-item">
        <img class="d-block" src="https://i.imgur.com/KAhNdyf.jpg" alt="Third slide">
        <div class="carousel-caption d-none d-block">
          <h5 style="text-shadow: 2px 2px 4px #000000;">...</h5>
          <p style="text-shadow: 2px 2px 4px #000000;">...</p>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <div class="row">
    <div class="card my-3 w-100">
      <div class="col-sm-12 card-body">
          <h5 class='card-title'>Subscribe to our Newsletter</h5>
        <div class="input-group">
               <input type="email" class="form-control" placeholder="Enter your email">
               <span class="input-group-btn">
               <button class="btn btn-success" type="submit">Subscribe</button>
               </span>
                </div>
        </div>
      </div>
  </div>
<!-- 
  <% @categories.each do |category| %>
  <nav class="navbar navbar-expand navbar-dark bg-success">


      <div class="collapse navbar-collapse justify-content-center" id="navbarsExample10">
        <ul class="navbar-nav">
  
          <li class="nav-item active">
              <%= link_to category.name, category_path(category.id), class:"nav-link" %>
          </li>
        </ul>
      </div>
    </nav>

  <div class="row mb-3">
      <% @products.each do |product| %>
      <% if product.category_id == category.id %>
      <div class="card col-md-3 col-sm-1"  >
          <img   src="<%= product.image %>" alt="" height="200" width="100%" class ="card-img-top ">
              <div class="card-body">
                  <p class="card-title"><%= product.name %></p>
                      <div class="info">
                        <%= link_to "More info", product_path(product) , class:"btn btn-success px-5"%><br>
                        <% if current_user && current_user.admin?  %>
                                  <%= link_to 'Edit', "/products/#{product.id}/edit", class: 'card-link' %> 
                    <%= link_to 'Delete', product_path(product.id), method: :delete, class: 'card-link' %>
                    <% end %>
                      </div>

              </div>
      </div>
      <% @i = @i + 1 %>
      <% if @i == 4 %>
      <% @i = 0 %>
      <% break %>
      <% end %>
      <% end %>
  <% end %>
    
  </div>
  <% end %> -->
  <div class="sidenav2 navbar navbar-dark bg-success">
      <% @categories.each do |cat, index| %>
        <a class="top navbar-dark nav-link text-light" href="#" id="<%= cat.name %>" data-id="<%= cat.id %>"><%= cat.name.capitalize %></a>
      <% end %>


  </div>

  <div class="card-columns row " >
      <% @products.each do |product| %>
          <div class="card col-md-3 col-sm-1 mt-3 "  >
              <img  class ="card-img-top" src="<%= product.image %>" alt="" height="200" width="100%">
                  <div class="card-body">
                      <p class="card-title"><%= product.name %></p>
                          <div class="info">
                            <%= link_to "More info", product_path(product) , class:"btn btn-success px-5"%><br>
                            <% if current_user && current_user.admin?  %>
                            <%= link_to 'Edit', "/products/#{product.id}/edit", class: 'card-link' %> 
              <%= link_to 'Delete', product_path(product.id), method: :delete, class: 'card-link' %>
              <% end %>
              

                          
                          </div>
                  </div>
          </div>
      <% end %>
  </div>




  <script>
      $('.sidenav2').on('click','.top',function(e){
          e.preventDefault()
     
             let pro = <%= @products.to_json.html_safe %>       
             let filtered = pro.filter(element => element.category_id == $(this).data("id"))
         
         //call the container card-columns
         $('.card-columns').empty()
         
         filtered.forEach(product => {
             let html = `<div class="card col-md-3 col-sm-1 mt-3">
                         <img class ="card-img-top" src="${product.image}" alt="" height="200" width="206">
                             <div class="card-body">
                                 <p class="card-title">${product.name}</p>
                                     <a class = 'btn btn-success px-5' href = "/products/${product.id}">
                                           More info
                                     </a><br>
                                     <% if current_user && current_user.admin?  %>
                                  <a class= "card-link" href="/products/${product.id}/edit"> Edit </a>
                                  <a class= "card-link" href="/products/${product.id}" data-method="delete" rel="nofollow">Delete</a>
                                 <% end %>
                     
                             </div>
                     </div>`
             $('.card-columns').append(html)
         })
         
      })
 </script>
</div>


</div>
